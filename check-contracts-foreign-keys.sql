-- Diagnostic query to check contracts table foreign keys\n-- Check which columns exist\nSELECT \n  column_name, \n  data_type,\n  is_nullable\nFROM information_schema.columns \nWHERE table_name = 'contracts' \n  AND column_name IN ('employer_id', 'client_id', 'first_party_id', 'second_party_id')\nORDER BY column_name;\n\n-- Check for NULL values in foreign keys\nSELECT \n  COUNT(*) as total_contracts,\n  COUNT(employer_id) as has_employer_id,\n  COUNT(client_id) as has_client_id,\n  COUNT(first_party_id) as has_first_party_id,\n  COUNT(second_party_id) as has_second_party_id,\n  COUNT(*) - COUNT(employer_id) as null_employer_id,\n  COUNT(*) - COUNT(client_id) as null_client_id,\n  COUNT(*) - COUNT(first_party_id) as null_first_party_id,\n  COUNT(*) - COUNT(second_party_id) as null_second_party_id\nFROM contracts;\n\n-- Sample data showing party relationships\nSELECT \n  id,\n  contract_number,\n  title,\n  employer_id,\n  client_id,\n  first_party_id,\n  second_party_id,\n  status\nFROM contracts\nLIMIT 5;
